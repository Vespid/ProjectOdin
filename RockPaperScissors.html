<html>
	<body>
		<button type="button" id="rock">Rock</button>
		<button type="button" id="paper">Paper</button>
		<button type="button" id="scissors">Scissors</button>

		
		<div id="immediateResult">
			<p>Result: <a id="changeme"></a></p>
		</div>
		<div id="results">Score:<br>You: <a id="userScore"></a><br>CPU: <a id="cpuScore"></a>
			<p id="winnerDisplay"></p></div>
	</body>

	<script>
		function playRound(playerSelection, computerSelection) {
			playerSelection=playerSelection.toLowerCase();
			if (playerSelection === 'rock'){
				if (computerSelection === "scissors"){
					return "lose";
				} else if (computerSelection === "paper"){
					return "win";
				} else {
					return "draw";
				}
				}
			else if (playerSelection === 'paper') {
				if (computerSelection === "scissors"){
					return "lose";
				} else if (computerSelection === "paper"){
					return "draw";
				} else {
					return "win";
				}
				}
			else if (playerSelection === 'scissors') {
				if (computerSelection === "scissors"){
					return "draw";
				} else if (computerSelection === "paper"){
					return "win";
				} else {
					return "lose";
				}
				}
			}
		function computerPlay(){
			let play=Array("rock","paper","scissors");
			return play[Math.floor(Math.random()*play.length)];
			}
		function checkInput(x){
			x=x.toLowerCase();
			let play=Array("rock","paper","scissors");
			return play.indexOf(x)>-1;
		}
		function game(playerSelection){
			let computerSelection=computerPlay();
			let result = playRound(playerSelection, computerSelection)
			console.log(result);
			return result;
		}
		function clickSelection(e){
			let playerSelection=e.target.id;
			let result = game(playerSelection);

			const resultsDiv=document.querySelector("#immediateResult");
			const change=document.querySelector("#changeme");
			change.textContent=result;
			logResult(result);
		}
		function logResult(result){
			const rTotal=document.querySelector("#results");
			if (result==="win"){
				userWin+=1;
			} else if (result==="lose"){
				cpuWin+=1;
			}
			const cpuScore=document.querySelector("#cpuScore");
			const UserScore=document.querySelector("#userScore");
			cpuScore.textContent=cpuWin;
			userScore.textContent=userWin;
			if (cpuWin===5||userWin===5){
				const winnerDisplay=document.querySelector("#winnerDisplay");
				if (cpuWin===5){
					winnerDisplay.textContent="CPU Wins";
				} else if (userWin===5){
					winnerDisplay.textContent="You Win";
				}
				cpuWin=0;
				userWin=0;
			}
		}
		let btn = document.querySelectorAll("button");
		btn.forEach(btn => btn.addEventListener("click", clickSelection));
		let cpuWin=0;
		let userWin=0;
	</script>
</html>